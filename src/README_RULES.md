# 可视化规则系统

## 概述

本项目采用类似 n8n IF 节点的可视化规则配置系统，让您以更直观的方式配置流程条件。

## 主要特性

### 1. 可视化条件构建器
- 无需编写复杂的表达式语法
- 直观的字段-操作符-值三段式配置
- 实时预览规则效果

### 2. 丰富的操作符支持

#### 通用操作符
- `等于` (=)
- `不等于` (≠)

#### 数字/日期操作符
- `大于` (>)
- `大于等于` (≥)
- `小于` (<)
- `小于等于` (≤)

#### 字符串操作符
- `包含`
- `不包含`
- `开头是`
- `结尾是`

#### 特殊操作符
- `为空`
- `不为空`
- `为真`
- `为假`

### 3. 逻辑组合

支持两种条件组合方式：
- **AND（且）**：所有条件都必须满足
- **OR（或）**：任一条件满足即可

### 4. 数据类型支持

- **文本 (String)**：适用于文本比较
- **数字 (Number)**：适用于数值计算和比较
- **布尔 (Boolean)**：适用于真/假判断
- **日期 (Date)**：适用于时间比较

## 使用场景

### 网关节点规则
在排他网关或包容网关中配置多个规则：
```
规则1: 订单金额 > 1000
规则2: 用户等级 = VIP
规则3: 支付状态 = 已支付 AND 库存 > 0
```

### 连接线条件
为每条连接线配置独立的条件规则：
```
字段: amount
类型: 数字
操作符: 大于
值: 1000
```

## 配置示例

### 示例1：订单审批流程
```
规则名称: 大额订单
条件1: amount (数字) 大于 10000
条件2: status (文本) 等于 "pending"
组合方式: AND
```

### 示例2：用户权限检查
```
规则名称: 高级用户
条件1: userLevel (文本) 等于 "VIP"
条件2: memberYears (数字) 大于等于 2
组合方式: OR
```

### 示例3：库存检查
```
规则名称: 有库存
条件1: stock (数字) 大于 0
条件2: status (文本) 不等于 "discontinued"
组合方式: AND
```

## 两种编辑模式

### 简单模式
- 直接输入表达式字符串
- 适合简单条件
- 向后兼容旧版本

### 可视化规则模式（推荐）
- 图形化配置界面
- 类似 n8n IF 节点
- 适合复杂条件
- 更易于理解和维护

## 技巧建议

1. **合理命名**：为每个规则设置清晰的名称
2. **优先级设置**：在排他网关中，优先级数字越小越先执行
3. **条件分组**：使用 AND/OR 合理组织多个条件
4. **数据类型**：选择正确的数据类型以获得合适的操作符
5. **默认路径**：为网关配置默认路径，处理所有条件都不满足的情况

## 与 n8n 的相似性

本系统借鉴了 n8n 工作流平台的 IF 节点设计：
- ✅ 可视化的条件配置
- ✅ 多条件支持
- ✅ AND/OR 逻辑组合
- ✅ 丰富的操作符
- ✅ 多种数据类型

## 未来计划

- [ ] 支持更多操作符（正则表达式、范围匹配等）
- [ ] 条件模板功能
- [ ] 规则复制和导入导出
- [ ] 规则测试和调试工具
